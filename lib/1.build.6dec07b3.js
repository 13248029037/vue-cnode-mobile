webpackJsonp([1,8],{23:function(t,n,e){var o,s;o=e(84);var i=e(97);s=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(s=o=o.default),"function"==typeof s&&(s=s.options),s.render=i.render,s.staticRenderFns=i.staticRenderFns,t.exports=o},79:function(t,n,e){"use strict";var o=e(2),s=(e.n(o),Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t});n.default={data:function(){return{content:""}},props:["replyId","replyTo","topicId","focus"],mounted:function(){this.replyTo&&(this.content="@"+this.replyTo+" ")},methods:{handleReply:function(){var t=this,n={accesstoken:this.userInfo.accesstoken,content:this.content+'<br/><br/><a class="form" href="https://github.com/soulcm/react-cnode-mobile">vue-cnode-mobile</a>',reply_id:this.replyId,topicId:this.topicId};this.$store.dispatch("replyTopic",n).then(function(){t.content="",t.$emit("onReply")})}},computed:s({},e.i(o.mapGetters)(["userInfo"]))}},84:function(t,n,e){"use strict";var o=e(2),s=(e.n(o),e(11)),i=e.n(s),a=e(92),r=e.n(a),c=e(16),p=e.n(c),l=e(15),u=e.n(l),d=e(4),f=e(14),h=e(17),m=e(6),y=e(18),I=e(5),v=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};n.default={data:function(){return{replyId:"",topicId:""}},mounted:function(){this.topicId=this.$route.params.id,this.getTopicInfo()},methods:{getTopicInfo:function(){this.$store.dispatch(d.d,this.topicId).then(function(){I.a.close()}).catch(function(){return I.a.close()})},getTabInfo:function(t){var n=t.tab;return t.good?n="good":t.top&&(n="top"),h.a[n]},addReply:function(t){this.userInfo.loginname||this.$router.push({name:"login",query:{redirect:encodeURIComponent(this.$route.name)}}),this.replyId=t},handleReply:function(){this.replyId=""},isUps:function(t){return t.indexOf(this.userInfo.id)>-1},handleUpReply:function(t){var n=this;return this.userInfo.loginname?void e.i(m.f)({accesstoken:this.userInfo.accesstoken},t.id).then(function(e){if(e.success)if("down"===e.action){var o=t.ups.indexOf(n.userInfo.id);o>-1&&t.ups.splice(o,1)}else t.ups.push(n.userInfo.id)}):void this.$router.push({name:"login",query:{redirect:encodeURIComponent(this.$route.name)}})}},filters:{getTimeInfo:function(t){return e.i(f.a)(t)}},beforeRouteEnter:function(t,n,e){y.a.state.topicInfo={},e()},computed:v({},e.i(o.mapGetters)(["topicInfo","userInfo","showLoad"])),components:{nvHead:i.a,nvReply:r.a,nvTop:p.a,nvLoad:u.a}}},92:function(t,n,e){var o,s;o=e(79);var i=e(95);s=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(s=o=o.default),"function"==typeof s&&(s=s.options),s.render=i.render,s.staticRenderFns=i.staticRenderFns,t.exports=o},95:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement;return n("section",{staticClass:"reply"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"},{name:"focus",rawName:"v-focus",value:t.focus,expression:"focus"}],staticClass:"text",attrs:{id:"content",rows:"8",placeholder:"回复支持Markdown语法,请注意标记代码"},domProps:{value:t._s(t.content)},on:{input:function(n){n.target.composing||(t.content=n.target.value)}}})," ",n("button",{staticClass:"btn btn-reply btn-reply-confirm",on:{click:t.handleReply}},["确定"])])},staticRenderFns:[]}},97:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement;return n("div",[n("nv-head")," ",t.topicInfo.title?n("div",{staticClass:"topic"},[n("h2",{staticClass:"topic-title",domProps:{textContent:t._s(t.topicInfo.title)}})," ",n("section",{staticClass:"author-info"},[n("router-link",{attrs:{to:{name:"user",params:{loginname:t.topicInfo.author.loginname}}}},[n("img",{staticClass:"avatar",attrs:{src:t.topicInfo.author.avatar_url,alt:""}})])," ",n("div",{staticClass:"center"},[n("span",{staticClass:"author",domProps:{textContent:t._s(t.topicInfo.author.loginname)}})," ",n("time",{staticClass:"info"},["\n                    发布于:"+t._s(t._f("getTimeInfo")(t.topicInfo.create_at))+"\n                "])])," ",n("div",{staticClass:"right"},[n("span",{staticClass:"tag",class:{color:t.topicInfo.good||t.topicInfo.top},domProps:{textContent:t._s(t.getTabInfo(t.topicInfo))}})," ",n("span",{staticClass:"name"},[t._s(t.topicInfo.visit_count)+"次浏览"])])])," ",n("section",{staticClass:"markdown-body topic-content",domProps:{innerHTML:t._s(t.topicInfo.content)}})," ",n("section",{staticClass:"topic-reply"},[n("h3",{staticClass:"topic-total"},[n("strong",[t._s(t.topicInfo.reply_count)])," 回复\n            "])," ",n("ul",{staticClass:"reply-list"},[t._l(t.topicInfo.replies,function(e){return n("li",[n("section",{staticClass:"user"},[n("router-link",{attrs:{to:{name:"user",params:{loginname:e.author.loginname}}}},[n("img",{staticClass:"head",attrs:{src:e.author.avatar_url}})])," ",n("div",{staticClass:"info"},[n("span",{staticClass:"left"},[n("span",{staticClass:"name",domProps:{textContent:t._s(e.author.loginname)}})," ",n("span",{staticClass:"name"},["\n                                    发布于:"+t._s(t._f("getTimeInfo")(e.create_at))+"\n                                "])])," ",n("span",{staticClass:"right"},[n("span",{staticClass:"iconfont icon-dianzan",class:{uped:t.isUps(e.ups)},staticStyle:{"margin-right":"5px"},on:{click:function(n){t.handleUpReply(e)}}})," ",n("span",{staticStyle:{"margin-right":"5px"}},[t._s(e.ups.length)])," ",n("span",{staticClass:"iconfont icon-hf",on:{click:function(n){t.addReply(e.id)}}})])])])," ",n("div",{staticClass:"reply-content markdown-body",domProps:{innerHTML:t._s(e.content)}})," ",t.userInfo.loginname&&t.replyId===e.id?n("nv-reply",{attrs:{"reply-to":e.author.loginname,"reply-id":e.id,"topic-id":t.topicId,focus:!0},on:{onReply:t.handleReply}}):t._e()])})])])," ",t.userInfo.loginname?n("nv-reply",{attrs:{"topic-id":t.topicId}}):t._e()]):t._e()," ",n("nv-top")])},staticRenderFns:[]}}});