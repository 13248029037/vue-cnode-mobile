webpackJsonp([1],{20:function(t,n,e){var o,s;o=e(81);var i=e(94);s=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(s=o=o.default),"function"==typeof s&&(s=s.options),s.render=i.render,s.staticRenderFns=i.staticRenderFns,t.exports=o},76:function(t,n,e){"use strict";var o=e(5);e.n(o);Object.defineProperty(n,"__esModule",{value:!0});var s=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};n.default={data:function(){return{content:""}},props:["replyId","replyTo","topicId","focus"],mounted:function(){this.replyTo&&(this.content="@"+this.replyTo+" ")},methods:{handleReply:function(){var t=this,n={accesstoken:this.userInfo.accesstoken,content:this.content+'<br/><br/><a class="form" href="https://github.com/soulcm/vue-cnode-mobile">vue-cnode-mobile</a>',reply_id:this.replyId,topicId:this.topicId};this.$store.dispatch("replyTopic",n).then(function(){t.content="",t.$emit("onReply")})}},computed:s({},e.i(o.mapGetters)(["userInfo"]))}},81:function(t,n,e){"use strict";var o=e(5),s=(e.n(o),e(8)),i=e.n(s),a=e(89),r=e.n(a),c=e(13),p=e.n(c),l=e(12),u=e.n(l),d=e(3),f=e(11),v=e(14),h=e(6),m=e(15),_=e(4);Object.defineProperty(n,"__esModule",{value:!0});var y=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};n.default={data:function(){return{replyId:"",topicId:""}},mounted:function(){this.topicId=this.$route.params.id,this.getTopicInfo()},methods:{getTopicInfo:function(){this.$store.dispatch(d.d,this.topicId).then(function(){_.a.close()}).catch(function(){return _.a.close()})},getTabInfo:function(t){var n=t.tab;return t.good?n="good":t.top&&(n="top"),v.a[n]},addReply:function(t){this.userInfo.loginname||this.$router.push({name:"login",query:{redirect:encodeURIComponent(this.$route.name)}}),this.replyId=t},handleReply:function(){this.replyId=""},isUps:function(t){return t.indexOf(this.userInfo.id)>-1},handleUpReply:function(t){var n=this;return this.userInfo.loginname?void e.i(h.f)({accesstoken:this.userInfo.accesstoken},t.id).then(function(e){if(e.success)if("down"===e.action){var o=t.ups.indexOf(n.userInfo.id);o>-1&&t.ups.splice(o,1)}else t.ups.push(n.userInfo.id)}):void this.$router.push({name:"login",query:{redirect:encodeURIComponent(this.$route.name)}})}},filters:{getTimeInfo:function(t){return e.i(f.a)(t)}},beforeRouteEnter:function(t,n,e){m.a.state.topicInfo={},e()},computed:y({},e.i(o.mapGetters)(["topicInfo","userInfo","showLoad"])),components:{nvHead:i.a,nvReply:r.a,nvTop:p.a,nvLoad:u.a}}},89:function(t,n,e){var o,s;o=e(76);var i=e(92);s=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(s=o=o.default),"function"==typeof s&&(s=s.options),s.render=i.render,s.staticRenderFns=i.staticRenderFns,t.exports=o},92:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("section",{staticClass:"reply"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"},{name:"focus",rawName:"v-focus",value:t.focus,expression:"focus"}],staticClass:"text",attrs:{id:"content",rows:"8",placeholder:"回复支持Markdown语法,请注意标记代码"},domProps:{value:t._s(t.content)},on:{input:function(n){n.target.composing||(t.content=n.target.value)}}}),t._v(" "),e("button",{staticClass:"btn btn-reply btn-reply-confirm",on:{click:t.handleReply}},[t._v("确定")])])},staticRenderFns:[]}},94:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("nv-head"),t._v(" "),t.topicInfo.title?e("div",{staticClass:"topic"},[e("h2",{staticClass:"topic-title",domProps:{textContent:t._s(t.topicInfo.title)}}),t._v(" "),e("section",{staticClass:"author-info"},[e("router-link",{attrs:{to:{name:"user",params:{loginname:t.topicInfo.author.loginname}}}},[e("img",{staticClass:"avatar",attrs:{src:t.topicInfo.author.avatar_url,alt:""}})]),t._v(" "),e("div",{staticClass:"center"},[e("span",{staticClass:"author",domProps:{textContent:t._s(t.topicInfo.author.loginname)}}),t._v(" "),e("time",{staticClass:"info"},[t._v("\n                    发布于:"+t._s(t._f("getTimeInfo")(t.topicInfo.create_at))+"\n                ")])]),t._v(" "),e("div",{staticClass:"right"},[e("span",{staticClass:"tag",class:{color:t.topicInfo.good||t.topicInfo.top},domProps:{textContent:t._s(t.getTabInfo(t.topicInfo))}}),t._v(" "),e("span",{staticClass:"name"},[t._v(t._s(t.topicInfo.visit_count)+"次浏览")])])],1),t._v(" "),e("section",{staticClass:"markdown-body topic-content",domProps:{innerHTML:t._s(t.topicInfo.content)}}),t._v(" "),e("section",{staticClass:"topic-reply"},[e("h3",{staticClass:"topic-total"},[e("strong",[t._v(t._s(t.topicInfo.reply_count))]),t._v(" 回复\n            ")]),t._v(" "),e("ul",{staticClass:"reply-list"},t._l(t.topicInfo.replies,function(n){return e("li",[e("section",{staticClass:"user"},[e("router-link",{attrs:{to:{name:"user",params:{loginname:n.author.loginname}}}},[e("img",{staticClass:"head",attrs:{src:n.author.avatar_url}})]),t._v(" "),e("div",{staticClass:"info"},[e("span",{staticClass:"left"},[e("span",{staticClass:"name",domProps:{textContent:t._s(n.author.loginname)}}),t._v(" "),e("span",{staticClass:"name"},[t._v("\n                                    发布于:"+t._s(t._f("getTimeInfo")(n.create_at))+"\n                                ")])]),t._v(" "),e("span",{staticClass:"right"},[e("span",{staticClass:"iconfont icon-dianzan",class:{uped:t.isUps(n.ups)},staticStyle:{"margin-right":"5px"},on:{click:function(e){t.handleUpReply(n)}}}),t._v(" "),e("span",{staticStyle:{"margin-right":"5px"}},[t._v(t._s(n.ups.length))]),t._v(" "),e("span",{staticClass:"iconfont icon-hf",on:{click:function(e){t.addReply(n.id)}}})])])],1),t._v(" "),e("div",{staticClass:"reply-content markdown-body",domProps:{innerHTML:t._s(n.content)}}),t._v(" "),t.userInfo.loginname&&t.replyId===n.id?e("nv-reply",{attrs:{"reply-to":n.author.loginname,"reply-id":n.id,"topic-id":t.topicId,focus:!0},on:{onReply:t.handleReply}}):t._e()],1)}))]),t._v(" "),t.userInfo.loginname?e("nv-reply",{attrs:{"topic-id":t.topicId}}):t._e()],1):t._e(),t._v(" "),e("nv-top")],1)},staticRenderFns:[]}}});