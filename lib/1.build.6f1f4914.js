webpackJsonp([1],{50:function(t,e,n){var o,s;o=n(51);var i=n(56);s=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(s=o=o.default),"function"==typeof s&&(s=s.options),s.render=i.render,s.staticRenderFns=i.staticRenderFns,t.exports=o},51:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},i=n(10),a=n(12),r=o(a),c=n(52),p=o(c),l=n(36),u=o(l),d=n(41),f=o(d),h=n(46),_=n(48),m=n(47),y=n(27),I=n(55),v=o(I);e.default={data:function(){return{replyId:"",topicId:""}},mounted:function(){this.topicId=this.$route.params.id,this.getTopicInfo()},methods:{getTopicInfo:function(){this.$store.dispatch(h.GET_TOPIC_INFO,this.topicId)},getTabInfo:function(t){var e=t.tab;return t.good?e="good":t.top&&(e="top"),m.topicTab[e]},addReply:function(t){this.userInfo.loginname||this.$router.push({name:"login",query:{redirect:encodeURIComponent(this.$route.name)}}),this.replyId=t},handleReply:function(){this.replyId=""},isUps:function(t){return t.indexOf(this.userInfo.id)>-1},handleUpReply:function(t){var e=this;return this.userInfo.loginname?void(0,y.upReply)({accesstoken:this.userInfo.accesstoken},t.id).then(function(n){if(n.success)if("down"===n.action){var o=t.ups.indexOf(e.userInfo.id);o>-1&&t.ups.splice(o,1)}else t.ups.push(e.userInfo.id)}):void this.$router.push({name:"login",query:{redirect:encodeURIComponent(this.$route.name)}})}},filters:{getTimeInfo:function(t){return(0,_.getTimeInfo)(t)}},beforeRouteEnter:function(t,e,n){v.default.state.topicInfo={},n()},computed:s({},(0,i.mapState)(["topicInfo","userInfo","showLoad"])),components:{nvHead:r.default,nvReply:p.default,nvTop:u.default,nvLoad:f.default}}},52:function(t,e,n){var o,s;o=n(53);var i=n(54);s=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(s=o=o.default),"function"==typeof s&&(s=s.options),s.render=i.render,s.staticRenderFns=i.staticRenderFns,t.exports=o},53:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},s=n(10),i=n(46);e.default={data:function(){return{content:""}},props:["replyId","replyTo","topicId","focus"],mounted:function(){this.replyTo&&(this.content="@"+this.replyTo+" ")},methods:{handleReply:function(){var t=this,e={accesstoken:this.userInfo.accesstoken,content:this.content+'<br/><br/><a class="form" href="https://github.com/soulcm/react-cnode-mobile">vue-cnode-mobile</a>',reply_id:this.replyId,topicId:this.topicId};this.$store.dispatch(i.REPLY,e).then(function(){t.content="",t.$emit("onReply")})}},computed:o({},(0,s.mapState)(["userInfo"]))}},54:function(module,exports){module.exports={render:function(){with(this)return _h("section",{staticClass:"reply"},[_h("textarea",{directives:[{name:"model",rawName:"v-model",value:content,expression:"content"},{name:"focus",rawName:"v-focus",value:focus,expression:"focus"}],staticClass:"text",attrs:{id:"content",rows:"8",placeholder:"回复支持Markdown语法,请注意标记代码"},domProps:{value:_s(content)},on:{input:function(t){t.target.composing||(content=t.target.value)}}})," ",_h("button",{staticClass:"btn btn-reply btn-reply-confirm",on:{click:handleReply}},["确定"])])},staticRenderFns:[]}},56:function(module,exports){module.exports={render:function(){with(this)return _h("div",[_h("nv-head")," ",topicInfo.title?_h("div",{staticClass:"topic"},[_h("h2",{staticClass:"topic-title",domProps:{textContent:_s(topicInfo.title)}})," ",_h("section",{staticClass:"author-info"},[_h("img",{staticClass:"avatar",attrs:{src:topicInfo.author.avatar_url,alt:""}})," ",_h("div",{staticClass:"center"},[_h("span",{staticClass:"author",domProps:{textContent:_s(topicInfo.author.loginname)}})," ",_h("time",{staticClass:"info"},["\n                    发布于:"+_s(_f("getTimeInfo")(topicInfo.create_at))+"\n                "])])," ",_h("div",{staticClass:"right"},[_h("span",{staticClass:"tag",class:{color:topicInfo.good||topicInfo.top},domProps:{textContent:_s(getTabInfo(topicInfo))}})," ",_h("span",{staticClass:"name"},[_s(topicInfo.visit_count)+"次浏览"])])])," ",_h("section",{staticClass:"markdown-body topic-content",domProps:{innerHTML:_s(topicInfo.content)}})," ",_h("section",{staticClass:"topic-reply"},[_h("h3",{staticClass:"topic-total"},[_h("strong",[_s(topicInfo.reply_count)])," 回复\n            "])," ",_h("ul",{staticClass:"reply-list"},[_l(topicInfo.replies,function(t){return _h("li",[_h("section",{staticClass:"user"},[_h("router-link",{attrs:{to:{name:"user",params:{loginname:t.author.loginname}}}},[_h("img",{staticClass:"head",attrs:{src:t.author.avatar_url}})])," ",_h("div",{staticClass:"info"},[_h("span",{staticClass:"left"},[_h("span",{staticClass:"name",domProps:{textContent:_s(t.author.loginname)}})," ",_h("span",{staticClass:"name"},["\n                                    发布于:"+_s(_f("getTimeInfo")(t.create_at))+"\n                                "])])," ",_h("span",{staticClass:"right"},[_h("span",{staticClass:"iconfont icon-dianzan",class:{uped:isUps(t.ups)},attrs:{style:"margin-right: 5px"},on:{click:function(e){handleUpReply(t)}}})," ",_h("span",{attrs:{style:"margin-right: 5px"}},[_s(t.ups.length)])," ",_h("span",{staticClass:"iconfont icon-hf",on:{click:function(e){addReply(t.id)}}})])])])," ",_h("div",{staticClass:"reply-content markdown-body",domProps:{innerHTML:_s(t.content)}})," ",userInfo.loginname&&replyId===t.id?_h("nv-reply",{attrs:{"reply-to":t.author.loginname,"reply-id":t.id,"topic-id":topicId,focus:!0},on:{onReply:handleReply}}):_e()])})])])," ",userInfo.loginname?_h("nv-reply",{attrs:{"topic-id":topicId}}):_e()]):_e()," ",_h("nv-top")," ",_h("nv-load",{attrs:{show:showLoad}})])},staticRenderFns:[]}}});